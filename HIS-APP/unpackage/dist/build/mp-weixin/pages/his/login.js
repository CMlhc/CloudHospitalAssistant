(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/his/login"],{1969:function(n,e,t){"use strict";t.r(e);var a=t("6f31"),o=t("1dc5");for(var r in o)"default"!==r&&function(n){t.d(e,n,function(){return o[n]})}(r);t("5a94");var i=t("2877"),u=Object(i["a"])(o["default"],a["a"],a["b"],!1,null,null,null);e["default"]=u.exports},"1dc5":function(n,e,t){"use strict";t.r(e);var a=t("9652"),o=t.n(a);for(var r in a)"default"!==r&&function(n){t.d(e,n,function(){return a[n]})}(r);e["default"]=o.a},"5a94":function(n,e,t){"use strict";var a=t("9c47"),o=t.n(a);o.a},"6f31":function(n,e,t){"use strict";var a=function(){var n=this,e=n.$createElement;n._self._c},o=[];t.d(e,"a",function(){return a}),t.d(e,"b",function(){return o})},9652:function(n,e,t){"use strict";(function(n){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=o(t("d064"));function o(n){return n&&n.__esModule?n:{default:n}}var r={data:function(){return{SessionKey:"",OpenId:"",name:null,avatarUrl:null,isCanUse:n.getStorageSync("isCanUse")||!0}},methods:{wxGetUserInfo:function(){var e=this;n.getUserInfo({provider:"weixin",success:function(t){t.userInfo.name,t.userInfo.avatarUrl;try{n.setStorageSync("isCanUse",!1),e.updateUserInfo()}catch(a){}e.login()},fail:function(n){}})},login:function(){var e=this;n.showLoading({title:"登录中..."}),n.login({provider:"weixin",success:function(t){var o=t.code;console.log("************"),e.isCanUse||n.getUserInfo({provider:"weixin",success:function(n){var t=n.userInfo.name,a=n.userInfo.avatarUrl;e.name=t,e.avatarUrl=a,e.updateUserInfo(o)}}),n.request({url:"http://localhost:8078/wechat/login",data:{code:o,name:e.name,avatarUrl:e.avatarUrl},method:"POST",header:{"content-type":"application/json"},success:function(e){n.hideLoading(),n.setStorageSync("token",e.data.data.token),a.default.state.hasLogin=!0,console.log(n.getStorageSync("token")),n.switchTab({url:"index"})}})}})}}};e.default=r}).call(this,t("543d")["default"])},"9c47":function(n,e,t){}},[["49d4","common/runtime","common/vendor"]]]);